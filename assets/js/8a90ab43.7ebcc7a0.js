"use strict";(globalThis.webpackChunkzigflow=globalThis.webpackChunkzigflow||[]).push([[4259],{3951(e,t,n){n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"dsl/tasks/for","title":"For","description":"Allows workflows to iterate over a collection of items, executing a defined set","source":"@site/docs/dsl/tasks/for.md","sourceDirName":"dsl/tasks","slug":"/dsl/tasks/for","permalink":"/docs/dsl/tasks/for","draft":false,"unlisted":false,"editUrl":"https://github.com/mrsimonemms/zigflow/tree/main/docs/docs/dsl/tasks/for.md","tags":[],"version":"current","frontMatter":{},"sidebar":"dslSidebar","previous":{"title":"Do","permalink":"/docs/dsl/tasks/do"},"next":{"title":"Fork","permalink":"/docs/dsl/tasks/fork"}}');var r=n(4848),i=n(8453);const o={},d="For",a={},l=[{value:"Properties",id:"properties",level:2},{value:"Example",id:"example",level:2}];function c(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"for",children:"For"})}),"\n",(0,r.jsx)(t.p,{children:"Allows workflows to iterate over a collection of items, executing a defined set\nof subtasks for each item in the collection. This task type is instrumental in\nhandling scenarios such as batch processing, data transformation, and repetitive\noperations across datasets."}),"\n",(0,r.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Type"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"for.each"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"no"})}),(0,r.jsxs)(t.td,{children:["The name of the variable used to store the current item being enumerated.",(0,r.jsx)("br",{}),"Defaults to ",(0,r.jsx)(t.code,{children:"item"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"for.in"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"yes"})}),(0,r.jsxs)(t.td,{children:["A ",(0,r.jsx)(t.a,{href:"intro#runtime-expressions",children:"runtime expression"})," used to get the collection to enumerate."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"for.at"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"no"})}),(0,r.jsxs)(t.td,{children:["The name of the variable used to store the index of the current item being enumerated.",(0,r.jsx)("br",{}),"Defaults to ",(0,r.jsx)(t.code,{children:"index"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"while"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"no"})}),(0,r.jsxs)(t.td,{children:["A ",(0,r.jsx)(t.a,{href:"intro#runtime-expressions",children:"runtime expression"})," that represents the condition, if any, that must be met for the iteration to continue.",(0,r.jsx)("br",{}),"The result of each iteration is stored in ",(0,r.jsx)(t.code,{children:"$data.<taskName>"}),", allowing the while expression to conditionally stop the loop."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"do"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.a,{href:"intro",children:(0,r.jsx)(t.code,{children:"map[string, task]"})})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"yes"})}),(0,r.jsxs)(t.td,{children:["The ",(0,r.jsx)(t.a,{href:"intro",children:"task(s)"})," to perform for each item in the collection. These will be run as a ",(0,r.jsx)(t.a,{href:"https://docs.temporal.io/child-workflows",children:"child workflow"})]})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"document:\n  dsl: 1.0.0\n  namespace: zigflow # Mapped to the task queue\n  name: for-loop # Workflow name\n  version: 0.0.1\ndo:\n  # Iterate over the map object\n  - forTaskMap:\n      export:\n        as: '${ $context + { forTaskMap: . } }'\n      for:\n        in: ${ $input.map }\n      do:\n        - setData:\n            export:\n              as: ${ . }\n            set:\n              key: \"${ \\\"hello: \\\" + $data.index }\"\n              value: ${ $data.item }\n        - wait:\n            output:\n              as: ${ $context }\n            wait:\n              seconds: 2\n  # Iterate over the data array\n  - forTaskArray:\n      export:\n        as: '${ $context + { forTaskArray: . } }'\n      for:\n        each: item\n        in: ${ $input.data }\n        at: index\n      # while: ${ $data.item.userId != 4 } # If this returns false, it will cut the iteration\n      do:\n        # Each iteration will run these tasks in order\n        - setData:\n            export:\n              as: ${ . }\n            set:\n              userId: ${ $data.item.userId } # Get the userId for this iteration\n              id: ${ $data.index } # Get the key\n              processed: true\n        - wait:\n            output:\n              as: ${ $context }\n            wait:\n              seconds: 1\n  - forTaskNumber:\n      output:\n        as: '${ $context + { forTaskNumber: . } }'\n      for:\n        in: ${ 5 }\n      do:\n        - setData:\n            export:\n              as: ${ . }\n            set:\n              number: ${ $data.item }\n        - wait:\n            output:\n              as: ${ $context }\n            wait:\n              seconds: 1\n"})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,t,n){n.d(t,{R:()=>o,x:()=>d});var s=n(6540);const r={},i=s.createContext(r);function o(e){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:t},e.children)}}}]);