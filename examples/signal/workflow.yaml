document:
  dsl: 1.0.0
  namespace: zigflow
  name: signal
  version: 0.0.1
  title: Listener Workflow (Signal)
  summary: Listen for Temporal signal events
do:
  - approveListener:
      metadata:
        timeout: 10s # Controls the AwaitWithTimeout timeout - defaults to 60s
      listen:
        to:
          one:
            with:
              # ID maps to the signal name in Temporal - this blocks until received
              id: approve
              # Temporal signal - used to make write request
              type: signal
              acceptIf: ${ .data.approveListener }
  - outputSignal:
      export:
        as: response
      set:
        # Get the data from the approveListener signal
        signal: ${ .data.approveListener }
  - wait:
      wait:
        seconds: 5
