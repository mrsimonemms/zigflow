"use strict";(globalThis.webpackChunkzigflow=globalThis.webpackChunkzigflow||[]).push([[9038],{4235(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>a,frontMatter:()=>i,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"dsl/tasks/run","title":"Run","description":"Provides the capability to run execute external commands","source":"@site/docs/dsl/tasks/run.md","sourceDirName":"dsl/tasks","slug":"/dsl/tasks/run","permalink":"/preview/sje-example-cleanup/docs/dsl/tasks/run","draft":false,"unlisted":false,"editUrl":"https://github.com/mrsimonemms/zigflow/tree/main/docs/docs/dsl/tasks/run.md","tags":[],"version":"current","frontMatter":{},"sidebar":"dslSidebar","previous":{"title":"Raise","permalink":"/preview/sje-example-cleanup/docs/dsl/tasks/raise"},"next":{"title":"Set","permalink":"/preview/sje-example-cleanup/docs/dsl/tasks/set"}}');var r=s(4848),l=s(8453);const i={},d="Run",c={},o=[{value:"Properties",id:"properties",level:2},{value:"Script Process",id:"script-process",level:2},{value:"Properties",id:"script-properties",level:3},{value:"Supported languages",id:"supported-languages",level:4},{value:"Examples",id:"script-examples",level:3},{value:"Shell Process",id:"shell-process",level:2},{value:"Properties",id:"shell-properties",level:3},{value:"Examples",id:"shell-examples",level:3},{value:"Workflow Process",id:"workflow-process",level:2},{value:"Properties",id:"workflow-properties",level:3},{value:"Example",id:"workflow-example",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"run",children:"Run"})}),"\n",(0,r.jsx)(n.p,{children:"Provides the capability to run execute external commands"}),"\n",(0,r.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"run.script"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.a,{href:"#script-process",children:(0,r.jsx)(n.code,{children:"script"})})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"no"})}),(0,r.jsxs)(n.td,{children:["The definition of the script to run.",(0,r.jsx)("br",{}),(0,r.jsxs)(n.em,{children:["Required if ",(0,r.jsx)(n.code,{children:"shell"})," and ",(0,r.jsx)(n.code,{children:"workflow"})," have not been set."]})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"run.shell"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.a,{href:"#shell-process",children:(0,r.jsx)(n.code,{children:"shell"})})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"no"})}),(0,r.jsxs)(n.td,{children:["The definition of the shell command to run.",(0,r.jsx)("br",{}),(0,r.jsxs)(n.em,{children:["Required if ",(0,r.jsx)(n.code,{children:"script"})," and ",(0,r.jsx)(n.code,{children:"workflow"})," have not been set."]})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"run.workflow"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.a,{href:"#workflow-process",children:(0,r.jsx)(n.code,{children:"workflow"})})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"no"})}),(0,r.jsxs)(n.td,{children:["The definition of the workflow to run.",(0,r.jsx)("br",{}),(0,r.jsxs)(n.em,{children:["Required if ",(0,r.jsx)(n.code,{children:"script"})," and ",(0,r.jsx)(n.code,{children:"shell"})," have not been set."]})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"await"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"boolean"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"no"})}),(0,r.jsxs)(n.td,{children:["Determines whether or not the process to run should be awaited for.",(0,r.jsx)("br",{}),(0,r.jsxs)(n.em,{children:["When set to ",(0,r.jsx)(n.code,{children:"false"}),", the task cannot wait for the process to complete and thus cannot output the process\u2019s result."]})," Only available for workflows.",(0,r.jsx)("br",{}),(0,r.jsxs)(n.em,{children:["Defaults to ",(0,r.jsx)(n.code,{children:"true"}),"."]})]})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"script-process",children:"Script Process"}),"\n",(0,r.jsx)(n.p,{children:"Enables the execution of custom scripts or code within a workflow, empowering\nworkflows to perform specialized logic, data processing, or integration tasks by\nexecuting user-defined scripts written in various programming languages."}),"\n",(0,r.jsx)(n.h3,{id:"script-properties",children:"Properties"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"language"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"yes"})}),(0,r.jsxs)(n.td,{children:["The language of the script to run.",(0,r.jsx)("br",{}),(0,r.jsxs)(n.em,{children:["Supported values are: ",(0,r.jsxs)(n.a,{href:"#supported-languages",children:[(0,r.jsx)(n.code,{children:"js"})," and ",(0,r.jsx)(n.code,{children:"python"})]}),"."]})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"code"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"yes"})}),(0,r.jsx)(n.td,{children:"The script's code."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"arguments"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"no"})}),(0,r.jsx)(n.td,{children:"A list of the arguments, if any, to the script as argv"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"environment"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"map"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"no"})}),(0,r.jsx)(n.td,{children:"A key/value mapping of the environment variables, if any, to use when running the configured script process"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"supported-languages",children:"Supported languages"}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.a,{href:"https://github.com/mrsimonemms/zigflow/blob/main/Dockerfile",children:"Docker image"}),"\nis built on the ",(0,r.jsxs)(n.a,{href:"https://hub.docker.com/_/node/",children:[(0,r.jsx)(n.code,{children:"node:lts-alpine"})," image"]})," and\ninstalls the ",(0,r.jsxs)(n.a,{href:"https://pkgs.alpinelinux.org/package/edge/main/x86/python3",children:[(0,r.jsx)(n.code,{children:"python3"})," Alpine package"]}),".\nFor specific versions of these languages, build your own image."]})}),"\n",(0,r.jsx)(n.p,{children:"This is a list of available languages and the command that is called."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Language"}),(0,r.jsx)(n.th,{style:{textAlign:"left"},children:"Binary Target"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"js"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"node"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"python"})}),(0,r.jsx)(n.td,{style:{textAlign:"left"},children:(0,r.jsx)(n.code,{children:"python"})})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"script-examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'document:\n  dsl: 1.0.0\n  namespace: zigflow\n  name: example\n  version: 0.0.1\ndo:\n  - nodejs:\n      export:\n        as: \'${ $context + { nodejs: . } }\'\n      run:\n        script:\n          language: js\n          code: |\n            const http = require(\'http\');\n\n            console.log(`${process.argv[2]} from ${process.env.NAME}`);\n\n            console.log(http.STATUS_CODES);\n          arguments:\n            - Hello\n          environment:\n            NAME: js\n  - python:\n      output:\n        as: \'${ $context + { python: . } }\'\n      run:\n        script:\n          language: python\n          code: |\n            import os\n            import sys\n\n            def main():\n                arg = sys.argv[1] if len(sys.argv) > 1 else ""\n\n                name = os.getenv("NAME", "")\n\n                print(f"{arg} from {name}")\n\n            if __name__ == "__main__":\n                main()\n          arguments:\n            - Hello\n          environment:\n            NAME: python\n'})}),"\n",(0,r.jsx)(n.h2,{id:"shell-process",children:"Shell Process"}),"\n",(0,r.jsx)(n.p,{children:"Enables the execution of shell commands within a workflow, enabling workflows to\ninteract with the underlying operating system and perform system-level operations,\nsuch as file manipulation, environment configuration, or system administration\ntasks."}),"\n",(0,r.jsx)(n.h3,{id:"shell-properties",children:"Properties"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"command"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"yes"})}),(0,r.jsx)(n.td,{children:"The shell command to run"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"arguments"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"string[]"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"no"})}),(0,r.jsx)(n.td,{children:"A list of the arguments, if any, to the shell command as argv"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"environment"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"map"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"no"})}),(0,r.jsx)(n.td,{children:"A key/value mapping of the environment variables, if any, to use when running the configured process"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"shell-examples",children:"Examples"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"document:\n  dsl: 1.0.0\n  namespace: zigflow\n  name: example\n  version: 0.0.1\ndo:\n  - runShell:\n      output:\n        as: '${ $context + { shell: . } }'\n      run:\n        shell:\n          command: ls\n          arguments:\n            - -la\n            - /\n"})}),"\n",(0,r.jsx)(n.h2,{id:"workflow-process",children:"Workflow Process"}),"\n",(0,r.jsxs)(n.p,{children:["Enables the invocation and execution of ",(0,r.jsx)(n.a,{href:"https://docs.temporal.io/child-workflows",children:"child workflows"}),"\nfrom a parent workflow, facilitating modularization, reusability, and abstraction\nof complex logic or business processes by encapsulating them into standalone\nworkflow units."]}),"\n",(0,r.jsx)(n.h3,{id:"workflow-properties",children:"Properties"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Type"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"name"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"yes"})}),(0,r.jsx)(n.td,{children:"The name of the workflow to run"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"namespace"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"yes"})}),(0,r.jsx)(n.td,{children:"This is not used and only exists to maintain compatability with the Serverless Workflow schema"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"version"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"string"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"yes"})}),(0,r.jsx)(n.td,{children:"This is not used and only exists to maintain compatability with the Serverless Workflow schema"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"input"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"any"})}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:(0,r.jsx)(n.code,{children:"no"})}),(0,r.jsx)(n.td,{children:"The data, if any, to pass as input to the workflow to execute. The value should be validated against the target workflow's input schema, if specified"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"workflow-example",children:"Example"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"document:\n  dsl: 1.0.0\n  namespace: zigflow\n  name: example\n  version: 0.0.1\ntimeout:\n  after:\n    minutes: 1\ndo:\n  - parentWorkflow:\n      do:\n        - wait:\n            wait:\n              seconds: 5\n        - callChildWorkflow1:\n            run:\n              workflow:\n                name: child-workflow1\n                namespace: default\n                version: 0.0.0\n        - wait:\n            wait:\n              seconds: 5\n        - callChildWorkflow2:\n            run:\n              workflow:\n                name: child-workflow2\n                namespace: default\n                version: 0.0.0\n  - child-workflow1:\n      do:\n        - wait:\n            wait:\n              seconds: 10\n  - child-workflow2:\n      do:\n        - wait:\n            wait:\n              seconds: 3\n"})})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>i,x:()=>d});var t=s(6540);const r={},l=t.createContext(r);function i(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);