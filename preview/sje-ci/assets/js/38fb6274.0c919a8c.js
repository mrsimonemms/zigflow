"use strict";(globalThis.webpackChunkzigflow=globalThis.webpackChunkzigflow||[]).push([[6903],{8453(e,n,s){s.d(n,{R:()=>l,x:()=>r});var t=s(6540);const i={},o=t.createContext(i);function l(e){const n=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(o.Provider,{value:n},e.children)}},9311(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"dsl/tasks/do","title":"Do","description":"The Do task is specified in every single workflow as it represents the basic","source":"@site/docs/dsl/tasks/do.md","sourceDirName":"dsl/tasks","slug":"/dsl/tasks/do","permalink":"/preview/sje-ci/docs/dsl/tasks/do","draft":false,"unlisted":false,"editUrl":"https://github.com/mrsimonemms/zigflow/tree/main/docs/docs/dsl/tasks/do.md","tags":[],"version":"current","frontMatter":{},"sidebar":"dslSidebar","previous":{"title":"Call","permalink":"/preview/sje-ci/docs/dsl/tasks/call"},"next":{"title":"For","permalink":"/preview/sje-ci/docs/dsl/tasks/for"}}');var i=s(4848),o=s(8453);const l={},r="Do",d={},a=[{value:"Properties",id:"properties",level:2},{value:"Examples",id:"examples",level:2},{value:"Single Workflow",id:"single-workflow",level:3},{value:"Multiple Workflows",id:"multiple-workflows",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"do",children:"Do"})}),"\n",(0,i.jsx)(n.p,{children:"The Do task is specified in every single workflow as it represents the basic\ndefinition of the workflow. In Temporal, a workflow is a sequence of steps that\nmust follow deterministic constraints:"}),"\n",(0,i.jsx)(n.admonition,{title:"Determinism",type:"info",children:(0,i.jsx)(n.p,{children:"The same steps are executed, in the same order, with the same\ninput and output data"})}),"\n",(0,i.jsxs)(n.p,{children:["The Do task is used by many other tasks, such as in a ",(0,i.jsx)(n.a,{href:"https://docs.temporal.io/child-workflows",children:"child workflow"}),".\nThese will be discussed in detail in those tasks."]}),"\n",(0,i.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Name"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Type"}),(0,i.jsx)(n.th,{style:{textAlign:"center"},children:"Required"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsx)(n.tbody,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"do"}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.a,{href:"./intro",children:(0,i.jsx)(n.code,{children:"map[string, task]"})})}),(0,i.jsx)(n.td,{style:{textAlign:"center"},children:(0,i.jsx)(n.code,{children:"no"})}),(0,i.jsx)(n.td,{children:"The tasks to perform sequentially."})]})})]}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.h3,{id:"single-workflow",children:"Single Workflow"}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"If you're not sure how to start building your workflow, start with a single\nworkflow definition."})}),"\n",(0,i.jsxs)(n.p,{children:["When defined at the root level, if a single is specified then a single Temporal\nworkflow is registered, with the workflow name set by the ",(0,i.jsx)(n.code,{children:"document.name"})," property.\nIn this example, the workflow name is ",(0,i.jsx)(n.code,{children:"single-workflow"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"document:\n  dsl: 1.0.0\n  namespace: zigflow\n  name: single-workflow\n  version: 0.0.1\ndo:\n  - setData:\n      set:\n        key: ${ uuid }\n  - wait:\n      wait:\n        seconds: 5\n  - getUser:\n      output:\n        as:\n          user: ${ . }\n      call: http\n      with:\n        method: get\n        headers:\n          uuid: ${ $data.key }\n        endpoint: https://jsonplaceholder.typicode.com/users/2\n"})}),"\n",(0,i.jsx)(n.p,{children:"This workflow is very basic, but explain the steps in details:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"setData"}),": this sets some data, which is randomly generated UUID key. This\nis available on ",(0,i.jsx)(n.code,{children:"${ $data.key }"}),". See ",(0,i.jsx)(n.a,{href:"./set",children:"Set"})," for a detailed explanation\nof why generated data should be used sparingly."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"wait"}),": pause the workflow, using a ",(0,i.jsx)(n.a,{href:"https://docs.temporal.io/workflow-execution/timers-delays",children:"Durable Timer"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"getUser"}),": call an HTTP endpoint, using the previously generated UUID as a\nheader."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"multiple-workflows",children:"Multiple Workflows"}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"Workflow names must be unique."})}),"\n",(0,i.jsxs)(n.p,{children:["When defined at the root level, you can use the Do task to create multiple\nworkflows by specifying multiple Do tasks at the top level. If you do this, the\nworkflow names will be set by the task name and the ",(0,i.jsx)(n.code,{children:"document.name"})," property\nwill be ignored."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"document:\n  dsl: 1.0.0\n  namespace: zigflow\n  name: multiple-workflows # This property is ignored\n  version: 0.0.1\ndo:\n  - workflow1:\n      do:\n        - wait:\n            wait:\n              seconds: 5\n        - getUser:\n            call: http\n            with:\n              method: get\n              endpoint: https://jsonplaceholder.typicode.com/users/1\n  - workflow2:\n      do:\n        - wait:\n            wait:\n              seconds: 10\n        - getUser:\n            call: http\n            with:\n              method: get\n              endpoint: https://jsonplaceholder.typicode.com/users/2\n"})}),"\n",(0,i.jsxs)(n.p,{children:["These workflow are basic, with a sleep and an HTTP call. These two workflows are\nindependent and are named ",(0,i.jsx)(n.code,{children:"workflow1"})," and ",(0,i.jsx)(n.code,{children:"workflow2"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}}}]);