"use strict";(globalThis.webpackChunkzigflow=globalThis.webpackChunkzigflow||[]).push([[8404],{5300(e,t,s){s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>i,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"dsl/tasks/call","title":"Call","description":"The Call task allows you to make calls to external services.","source":"@site/docs/dsl/tasks/call.md","sourceDirName":"dsl/tasks","slug":"/dsl/tasks/call","permalink":"/preview/sje-build-improvements/docs/dsl/tasks/call","draft":false,"unlisted":false,"editUrl":"https://github.com/mrsimonemms/zigflow/tree/main/docs/docs/dsl/tasks/call.md","tags":[],"version":"current","frontMatter":{},"sidebar":"dslSidebar","previous":{"title":"Introduction","permalink":"/preview/sje-build-improvements/docs/dsl/tasks/intro"},"next":{"title":"Do","permalink":"/preview/sje-build-improvements/docs/dsl/tasks/do"}}');var r=s(4848),l=s(8453);const i={},c="Call",d={},h=[{value:"Properties",id:"properties",level:2},{value:"Activity",id:"activity",level:2},{value:"Properties",id:"activity-properties",level:3},{value:"Example",id:"activity-example",level:3},{value:"gRPC",id:"grpc",level:2},{value:"Properties",id:"grpc-properties",level:3},{value:"Example",id:"grpc-example",level:3},{value:"HTTP",id:"http",level:2},{value:"Properties",id:"http-properties",level:3},{value:"Example",id:"http-example",level:3}];function o(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"call",children:"Call"})}),"\n",(0,r.jsx)(t.p,{children:"The Call task allows you to make calls to external services."}),"\n",(0,r.jsx)(t.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Type"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"call"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"yes"})}),(0,r.jsxs)(t.td,{children:["The name of the function to call. One of ",(0,r.jsx)(t.code,{children:"activity"})," or ",(0,r.jsx)(t.code,{children:"http"}),"."]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"with"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"map"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"no"})}),(0,r.jsx)(t.td,{children:"A name/value mapping of the parameters to call the function with"})]})]})]}),"\n",(0,r.jsx)(t.h2,{id:"activity",children:"Activity"}),"\n",(0,r.jsxs)(t.p,{children:["Call an external ",(0,r.jsx)(t.a,{href:"https://docs.temporal.io/activities",children:"Temporal activity"})," running\non a separate ",(0,r.jsx)(t.a,{href:"https://docs.temporal.io/task-queue#task-queue",children:"Task Queue"})," within\nthe same namespace."]}),"\n",(0,r.jsxs)(t.p,{children:["To use this, the ",(0,r.jsx)(t.code,{children:"call"})," property must equal ",(0,r.jsx)(t.code,{children:"activity"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"activity-properties",children:"Properties"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Type"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"name"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"yes"})}),(0,r.jsx)(t.td,{children:"The activity name to call."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"arguments"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"any[]"})}),(0,r.jsx)(t.td,{children:"The arguments to pass to the activity. These are interpolated through the state."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"taskQueue"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"yes"})}),(0,r.jsx)(t.td,{children:"The task queue where the activity is running."})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"activity-example",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"document:\n  dsl: 1.0.0\n  namespace: zigflow\n  name: external-activity-call\n  version: 0.0.1\ndo:\n  - captureInput:\n      set:\n        requestedUserId: ${ $input.userId }\n        requestId: ${ uuid }\n  - fetchProfile:\n      call: activity\n      with:\n          name: activitycall.FetchProfile\n          arguments:\n            - ${ $data.requestedUserId }\n            - ${ $data.requestId }\n          taskQueue: activity-call-worker\n"})}),"\n",(0,r.jsx)(t.h2,{id:"grpc",children:"gRPC"}),"\n",(0,r.jsxs)(t.p,{children:["Call an external resource via gRPC. To use this, the ",(0,r.jsx)(t.code,{children:"call"})," property must equal\n",(0,r.jsx)(t.code,{children:"grpc"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"grpc-properties",children:"Properties"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Type"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"proto.endpoint"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"yes"})}),(0,r.jsx)(t.td,{children:"The proto resource that describes the gRPC service to call.."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"service.name"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"yes"})}),(0,r.jsx)(t.td,{children:"The name of the gRPC service to call."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"service.host"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"yes"})}),(0,r.jsx)(t.td,{children:"The hostname of the gRPC service to call."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"service.port"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"integer"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"no"})}),(0,r.jsx)(t.td,{children:"The port number of the gRPC service to call."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"method"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"yes"})}),(0,r.jsx)(t.td,{children:"The name of the gRPC service method to call."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"arguments"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"map"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"no"})}),(0,r.jsx)(t.td,{children:"A name/value mapping of the method call's arguments, if any."})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"grpc-example",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"document:\n  dsl: 1.0.0\n  namespace: zigflow\n  name: external-activity-call\n  version: 0.0.1\ndo:\n  - greet:\n      call: grpc\n      with:\n        proto:\n          endpoint: file:///go/app/examples/external-calls/grpc/basic/proto/basic/v1/basic.proto\n        service:\n          name: providers.v1.BasicService\n          host: grpc\n          port: 3000\n        method: Command1\n        arguments:\n          input: hello world\n"})}),"\n",(0,r.jsx)(t.h2,{id:"http",children:"HTTP"}),"\n",(0,r.jsxs)(t.p,{children:["Call an external resource via HTTP. To use this, the ",(0,r.jsx)(t.code,{children:"call"})," property must equal\n",(0,r.jsx)(t.code,{children:"http"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"http-properties",children:"Properties"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Name"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Type"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"Required"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"method"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"yes"})}),(0,r.jsx)(t.td,{children:"The HTTP request method."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"endpoint"}),(0,r.jsxs)(t.td,{style:{textAlign:"center"},children:[(0,r.jsx)(t.code,{children:"string"}),"|",(0,r.jsx)(t.a,{href:"https://github.com/serverlessworkflow/specification/blob/main/dsl-reference.md#endpoint",children:(0,r.jsx)(t.code,{children:"endpoint"})})]}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"yes"})}),(0,r.jsx)(t.td,{children:"An URI or an object that describes the HTTP endpoint to call."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"headers"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"map"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"no"})}),(0,r.jsx)(t.td,{children:"A name/value mapping of the HTTP headers to use, if any."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"body"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"any"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"no"})}),(0,r.jsx)(t.td,{children:"The HTTP request body, if any."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"query"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"map[string, any]"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"no"})}),(0,r.jsx)(t.td,{children:"A name/value mapping of the query parameters to use, if any."})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"output"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"string"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"no"})}),(0,r.jsxs)(t.td,{children:["The http call's output format.",(0,r.jsx)("br",{}),(0,r.jsx)(t.em,{children:"Supported values are:"}),(0,r.jsx)("br",{}),(0,r.jsxs)(t.em,{children:["- ",(0,r.jsx)(t.code,{children:"raw"}),", which output's the base-64 encoded ",(0,r.jsx)(t.a,{href:"https://github.com/serverlessworkflow/specification/blob/main/dsl-reference.md#http-response",children:"http response"})," content, if any."]}),(0,r.jsx)("br",{}),(0,r.jsxs)(t.em,{children:["- ",(0,r.jsx)(t.code,{children:"content"}),", which outputs the content of ",(0,r.jsx)(t.a,{href:"https://github.com/serverlessworkflow/specification/blob/main/dsl-reference.md#http-response",children:"http response"}),", possibly deserialized."]}),(0,r.jsx)("br",{}),(0,r.jsxs)(t.em,{children:["- ",(0,r.jsx)(t.code,{children:"response"}),", which outputs the ",(0,r.jsx)(t.a,{href:"https://github.com/serverlessworkflow/specification/blob/main/dsl-reference.md#http-response",children:"http response"}),"."]}),(0,r.jsx)("br",{}),(0,r.jsxs)(t.em,{children:["Defaults to ",(0,r.jsx)(t.code,{children:"content"}),"."]})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"redirect"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"boolean"})}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:(0,r.jsx)(t.code,{children:"no"})}),(0,r.jsxs)(t.td,{children:["Specifies whether redirection status codes (",(0,r.jsx)(t.code,{children:"300\u2013399"}),") should be treated as errors.",(0,r.jsx)("br",{}),(0,r.jsxs)(t.em,{children:["If set to ",(0,r.jsx)(t.code,{children:"false"}),", runtimes must raise an error for response status codes outside the ",(0,r.jsx)(t.code,{children:"200\u2013299"})," range."]}),(0,r.jsx)("br",{}),(0,r.jsxs)(t.em,{children:["If set to ",(0,r.jsx)(t.code,{children:"true"}),", they must raise an error for status codes outside the ",(0,r.jsx)(t.code,{children:"200\u2013399"})," range."]}),(0,r.jsx)("br",{}),(0,r.jsxs)(t.em,{children:["Defaults to ",(0,r.jsx)(t.code,{children:"false"}),"."]})]})]})]})]}),"\n",(0,r.jsx)(t.h3,{id:"http-example",children:"Example"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",children:"document:\n  dsl: 1.0.0\n  namespace: zigflow\n  name: call-http\n  version: 0.0.1\ndo:\n  - getUser:\n      call: http\n      with:\n        method: get\n        endpoint: https://jsonplaceholder.typicode.com/users/2\n"})})]})}function a(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453(e,t,s){s.d(t,{R:()=>i,x:()=>c});var n=s(6540);const r={},l=n.createContext(r);function i(e){const t=n.useContext(l);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(l.Provider,{value:t},e.children)}}}]);